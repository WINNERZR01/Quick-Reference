<!doctype html>
<html lang="en" data-color-mode="dark">
<head>
<meta charset="utf-8">
<title># remark-rehype

[![Build][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]
[![Sponsors][sponsors-badge]][collective]
[![Backers][backers-badge]][collective]
[![Chat][chat-badge]][chat]

**[remark][]** plugin that turns markdown into HTML to support **[rehype][]**.

## Contents

*   [What is this?](#what-is-this)
*   [When should I use this?](#when-should-i-use-this)
*   [Install](#install)
*   [Use](#use)
*   [API](#api)
    *   [`unified().use(remarkRehype[, destination][, options])`](#unifieduseremarkrehype-destination-options)
    *   [`defaultHandlers`](#defaulthandlers)
    *   [`all`](#all)
    *   [`one`](#one)
*   [Examples](#examples)
    *   [Example: supporting HTML in markdown naïvely](#example-supporting-html-in-markdown-naïvely)
    *   [Example: supporting HTML in markdown properly](#example-supporting-html-in-markdown-properly)
    *   [Example: footnotes in languages other than English](#example-footnotes-in-languages-other-than-english)
*   [Syntax tree](#syntax-tree)
*   [CSS](#css)
*   [Types](#types)
*   [Compatibility](#compatibility)
*   [Security](#security)
*   [Related](#related)
*   [Contribute](#contribute)
*   [License](#license)

## What is this?

This package is a [unified][] ([remark][]) plugin that switches from remark (the
markdown ecosystem) to rehype (the HTML ecosystem).
It does this by transforming the current markdown (mdast) syntax tree into an
HTML (hast) syntax tree.
remark plugins deal with mdast and rehype plugins deal with hast, so plugins
used after `remark-rehype` have to be rehype plugins.

The reason that there are different ecosystems for markdown and HTML is that
turning markdown into HTML is, while frequently needed, not the only purpose of
markdown.
Checking (linting) and formatting markdown are also common use cases for
remark and markdown.
There are several aspects of markdown that do not translate 1-to-1 to HTML.
In some cases markdown contains more information than HTML: for example, there
are several ways to add a link in markdown (as in, autolinks: `&#x3C;https://url>`,
resource links: `[label](url)`, and reference links with definitions:
`[label][id]` and `[id]: url`).
In other cases HTML contains more information than markdown: there are many
tags, which add new meaning (semantics), available in HTML that aren’t available
in markdown.
If there was just one AST, it would be quite hard to perform the tasks that
several remark and rehype plugins currently do.

**unified** is a project that transforms content with abstract syntax trees
(ASTs).
**remark** adds support for markdown to unified.
**rehype** adds support for HTML to unified.
**mdast** is the markdown AST that remark uses.
**hast** is the markdown AST that rehype uses.
This is a remark plugin that transforms mdast into hast to support rehype.

## When should I use this?

This project is useful when you want to turn markdown to HTML.
It opens up a whole new ecosystem with tons of plugins to do all kinds of
things.
You can [minify HTML][rehype-minify], [format HTML][rehype-format],
[make sure it’s safe][rehype-sanitize], [highlight code][rehype-highlight],
[add metadata][rehype-meta], and a lot more.

A different plugin, [`rehype-raw`][rehype-raw], adds support for raw HTML
written inside markdown.
This is a separate plugin because supporting HTML inside markdown is a heavy
task and not always needed.
To use both together, you also have to configure `remark-rehype` with
`allowDangerousHtml: true`.

The rehype plugin [`rehype-remark`][rehype-remark] does the inverse of this
plugin.
It turns HTML into markdown.

## Install

This package is [ESM only](https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c).
In Node.js (version 12.20+, 14.14+, or 16.0+), install with [npm][]:

```sh
npm install remark-rehype
```

In Deno with [Skypack][]:

```js
import remarkRehype from 'https://cdn.skypack.dev/remark-rehype@10?dts'
```

In browsers with [Skypack][]:

```html
&#x3C;script type &#x26;  index cheatsheet &#x26;  Quick Reference</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta description="为开发人员分享快速参考备忘单。">
<meta keywords="Quick,Reference,cheatsheet,index">
<link rel="icon" href="data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%221em%22%20width%3D%221em%22%3E%20%3Cpath%20d%3D%22m21.66%2010.44-.98%204.18c-.84%203.61-2.5%205.07-5.62%204.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2%201.17-2.42%203.16-3.07%206.5-2.28l1.67.39c4.19.98%205.47%203.05%204.49%207.23Z%22%20fill%3D%22%23c9d1d9%22%2F%3E%20%3Cpath%20d%3D%22M15.06%2019.39c-.62.42-1.4.77-2.35%201.08l-1.58.52c-3.97%201.28-6.06.21-7.35-3.76L2.5%2013.28c-1.28-3.97-.22-6.07%203.75-7.35l1.58-.52c.41-.13.8-.24%201.17-.31-.3.61-.54%201.35-.74%202.2l-.98%204.19c-.98%204.18.31%206.24%204.48%207.23l1.68.4c.58.14%201.12.23%201.62.27Zm2.43-8.88c-.06%200-.12-.01-.19-.02l-4.85-1.23a.75.75%200%200%201%20.37-1.45l4.85%201.23a.748.748%200%200%201-.18%201.47Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3Cpath%20d%3D%22M14.56%2013.89c-.06%200-.12-.01-.19-.02l-2.91-.74a.75.75%200%200%201%20.37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3C%2Fsvg%3E" type="image/svg+xml">
<link rel="stylesheet" href="..\..\style\style.css">
<link rel="stylesheet" href="..\..\style\katex.css">
</head>
<body><nav class="header-nav"><div class="max-container"><a href="..\..\index.html" class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <path d="m21.66 10.44-.98 4.18c-.84 3.61-2.5 5.07-5.62 4.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2 1.17-2.42 3.16-3.07 6.5-2.28l1.67.39c4.19.98 5.47 3.05 4.49 7.23Z" fill="#c9d1d9"></path>
  <path d="M15.06 19.39c-.62.42-1.4.77-2.35 1.08l-1.58.52c-3.97 1.28-6.06.21-7.35-3.76L2.5 13.28c-1.28-3.97-.22-6.07 3.75-7.35l1.58-.52c.41-.13.8-.24 1.17-.31-.3.61-.54 1.35-.74 2.2l-.98 4.19c-.98 4.18.31 6.24 4.48 7.23l1.68.4c.58.14 1.12.23 1.62.27Zm2.43-8.88c-.06 0-.12-.01-.19-.02l-4.85-1.23a.75.75 0 0 1 .37-1.45l4.85 1.23a.748.748 0 0 1-.18 1.47Z" fill="#228e6c"></path>
  <path d="M14.56 13.89c-.06 0-.12-.01-.19-.02l-2.91-.74a.75.75 0 0 1 .37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z" fill="#228e6c"></path>
</svg>
<span class="title">Quick Reference</span></a><div class="menu"><a href="https://github.com/jaywcjlove/reference/blob/main/node_modules/remark-rehype\readme.md" class="" target="__blank"><svg viewBox="0 0 36 36" fill="currentColor" height="1em" width="1em"><path d="m33 6.4-3.7-3.7a1.71 1.71 0 0 0-2.36 0L23.65 6H6a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h22a2 2 0 0 0 2-2V11.76l3-3a1.67 1.67 0 0 0 0-2.36ZM18.83 20.13l-4.19.93 1-4.15 9.55-9.57 3.23 3.23ZM29.5 9.43 26.27 6.2l1.85-1.85 3.23 3.23Z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg><span>编辑</span></a><button id="darkMode" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="light" height="1em" width="1em">
  <path d="M6.995 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007-2.246-5.007-5.007-5.007S6.995 9.239 6.995 12zM11 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2H2zm17 0h3v2h-3zM5.637 19.778l-1.414-1.414 2.121-2.121 1.414 1.414zM16.242 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.344 7.759 4.223 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"></path>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="dark" height="1em" width="1em">
  <path d="M12 11.807A9.002 9.002 0 0 1 10.049 2a9.942 9.942 0 0 0-5.12 2.735c-3.905 3.905-3.905 10.237 0 14.142 3.906 3.906 10.237 3.905 14.143 0a9.946 9.946 0 0 0 2.735-5.119A9.003 9.003 0 0 1 12 11.807z"></path>
</svg>
</button><script>
  const LOCAL_NANE = '_dark_mode_theme_'
  const rememberedValue = localStorage.getItem(LOCAL_NANE);
  if (rememberedValue && ['light', 'dark'].includes(rememberedValue)) {
    document.documentElement.setAttribute('data-color-mode', rememberedValue);
  }
  const button = document.querySelector('#darkMode');
  button.onclick = () => {
    const theme = document.documentElement.dataset.colorMode;
    const mode = theme === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-color-mode', mode);
    localStorage.setItem(LOCAL_NANE, mode);
  }
</script><a href="https://github.com/jaywcjlove/reference" class="" target="__blank"><svg viewBox="0 0 16 16" fill="currentColor" height="1em" width="1em"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></div></nav><div class="wrap h1body-exist max-container"><header class="wrap-header h1wrap"><h1 id="remark-rehype"><a aria-hidden="true" tabindex="-1" href="#remark-rehype"><span class="icon icon-link"></span></a>remark-rehype</h1><div class="wrap-body">
<p><a href="https://github.com/remarkjs/remark-rehype/actions"><img src="https://github.com/remarkjs/remark-rehype/workflows/main/badge.svg" alt="Build"></a>
<a href="https://codecov.io/github/remarkjs/remark-rehype"><img src="https://img.shields.io/codecov/c/github/remarkjs/remark-rehype.svg" alt="Coverage"></a>
<a href="https://www.npmjs.com/package/remark-rehype"><img src="https://img.shields.io/npm/dm/remark-rehype.svg" alt="Downloads"></a>
<a href="https://bundlephobia.com/result?p=remark-rehype"><img src="https://img.shields.io/bundlephobia/minzip/remark-rehype.svg" alt="Size"></a>
<a href="https://opencollective.com/unified"><img src="https://opencollective.com/unified/sponsors/badge.svg" alt="Sponsors"></a>
<a href="https://opencollective.com/unified"><img src="https://opencollective.com/unified/backers/badge.svg" alt="Backers"></a>
<a href="https://github.com/remarkjs/remark/discussions"><img src="https://img.shields.io/badge/chat-discussions-success.svg" alt="Chat"></a></p>
<p><strong><a href="https://github.com/remarkjs/remark">remark</a></strong> plugin that turns markdown into HTML to support <strong><a href="https://github.com/rehypejs/rehype">rehype</a></strong>.</p>
</div></header><div class="menu-tocs"><div class="menu-btn"><svg aria-hidden="true" fill="currentColor" height="1em" width="1em" viewBox="0 0 16 16" version="1.1" data-view-component="true">
  <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg></div><div class="menu-modal"><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#contents">Contents</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#what-is-this">What is this?</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#when-should-i-use-this">When should I use this?</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#install">Install</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#use">Use</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#api">API</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#unifieduseremarkrehype-destination-options">unified().use(remarkRehype[, destination][, options])</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#destination">destination</a><a aria-hidden="true" class="leve5 tocs-link" data-num="5" href="#options">options</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionsallowdangeroushtml">options.allowDangerousHtml</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionsclobberprefix">options.clobberPrefix</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionsfootnotelabel">options.footnoteLabel</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionsfootnotebacklabel">options.footnoteBackLabel</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionshandlers">options.handlers</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionspassthrough">options.passThrough</a><a aria-hidden="true" class="leve6 tocs-link" data-num="6" href="#optionsunknownhandler">options.unknownHandler</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#defaulthandlers">defaultHandlers</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#all">all</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#one">one</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#examples">Examples</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#example-supporting-html-in-markdown-naïvely">Example: supporting HTML in markdown naïvely</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#example-supporting-html-in-markdown-properly">Example: supporting HTML in markdown properly</a><a aria-hidden="true" class="leve3 tocs-link" data-num="3" href="#example-footnotes-in-languages-other-than-english">Example: footnotes in languages other than English</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#syntax-tree">Syntax tree</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#css">CSS</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#types">Types</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#compatibility">Compatibility</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#security">Security</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#related">Related</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#contribute">Contribute</a><a aria-hidden="true" class="leve2 tocs-link" data-num="2" href="#license">License</a></div></div><div class="h1wrap-body"><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="contents"><a aria-hidden="true" tabindex="-1" href="#contents"><span class="icon icon-link"></span></a>Contents</h2><div class="wrap-body">
<ul>
<li><a href="#what-is-this">What is this?</a></li>
<li><a href="#when-should-i-use-this">When should I use this?</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#use">Use</a></li>
<li><a href="#api">API</a>
<ul>
<li><a href="#unifieduseremarkrehype-destination-options"><code>unified().use(remarkRehype[, destination][, options])</code></a></li>
<li><a href="#defaulthandlers"><code>defaultHandlers</code></a></li>
<li><a href="#all"><code>all</code></a></li>
<li><a href="#one"><code>one</code></a></li>
</ul>
</li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#example-supporting-html-in-markdown-na%C3%AFvely">Example: supporting HTML in markdown naïvely</a></li>
<li><a href="#example-supporting-html-in-markdown-properly">Example: supporting HTML in markdown properly</a></li>
<li><a href="#example-footnotes-in-languages-other-than-english">Example: footnotes in languages other than English</a></li>
</ul>
</li>
<li><a href="#syntax-tree">Syntax tree</a></li>
<li><a href="#css">CSS</a></li>
<li><a href="#types">Types</a></li>
<li><a href="#compatibility">Compatibility</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#related">Related</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#license">License</a></li>
</ul>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="what-is-this"><a aria-hidden="true" tabindex="-1" href="#what-is-this"><span class="icon icon-link"></span></a>What is this?</h2><div class="wrap-body">
<p>This package is a <a href="https://github.com/unifiedjs/unified">unified</a> (<a href="https://github.com/remarkjs/remark">remark</a>) plugin that switches from remark (the
markdown ecosystem) to rehype (the HTML ecosystem).
It does this by transforming the current markdown (mdast) syntax tree into an
HTML (hast) syntax tree.
remark plugins deal with mdast and rehype plugins deal with hast, so plugins
used after <code>remark-rehype</code> have to be rehype plugins.</p>
<p>The reason that there are different ecosystems for markdown and HTML is that
turning markdown into HTML is, while frequently needed, not the only purpose of
markdown.
Checking (linting) and formatting markdown are also common use cases for
remark and markdown.
There are several aspects of markdown that do not translate 1-to-1 to HTML.
In some cases markdown contains more information than HTML: for example, there
are several ways to add a link in markdown (as in, autolinks: <code>&#x3C;https://url></code>,
resource links: <code>[label](url)</code>, and reference links with definitions:
<code>[label][id]</code> and <code>[id]: url</code>).
In other cases HTML contains more information than markdown: there are many
tags, which add new meaning (semantics), available in HTML that aren’t available
in markdown.
If there was just one AST, it would be quite hard to perform the tasks that
several remark and rehype plugins currently do.</p>
<p><strong>unified</strong> is a project that transforms content with abstract syntax trees
(ASTs).
<strong>remark</strong> adds support for markdown to unified.
<strong>rehype</strong> adds support for HTML to unified.
<strong>mdast</strong> is the markdown AST that remark uses.
<strong>hast</strong> is the markdown AST that rehype uses.
This is a remark plugin that transforms mdast into hast to support rehype.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="when-should-i-use-this"><a aria-hidden="true" tabindex="-1" href="#when-should-i-use-this"><span class="icon icon-link"></span></a>When should I use this?</h2><div class="wrap-body">
<p>This project is useful when you want to turn markdown to HTML.
It opens up a whole new ecosystem with tons of plugins to do all kinds of
things.
You can <a href="https://github.com/rehypejs/rehype-minify">minify HTML</a>, <a href="https://github.com/rehypejs/rehype-format">format HTML</a>,
<a href="https://github.com/rehypejs/rehype-sanitize">make sure it’s safe</a>, <a href="https://github.com/rehypejs/rehype-highlight">highlight code</a>,
<a href="https://github.com/rehypejs/rehype-meta">add metadata</a>, and a lot more.</p>
<p>A different plugin, <a href="https://github.com/rehypejs/rehype-raw"><code>rehype-raw</code></a>, adds support for raw HTML
written inside markdown.
This is a separate plugin because supporting HTML inside markdown is a heavy
task and not always needed.
To use both together, you also have to configure <code>remark-rehype</code> with
<code>allowDangerousHtml: true</code>.</p>
<p>The rehype plugin <a href="https://github.com/rehypejs/rehype-remark"><code>rehype-remark</code></a> does the inverse of this
plugin.
It turns HTML into markdown.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="install"><a aria-hidden="true" tabindex="-1" href="#install"><span class="icon icon-link"></span></a>Install</h2><div class="wrap-body">
<p>This package is <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c">ESM only</a>.
In Node.js (version 12.20+, 14.14+, or 16.0+), install with <a href="https://docs.npmjs.com/cli/install">npm</a>:</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> remark-rehype
</span></code></pre>
<p>In Deno with <a href="https://www.skypack.dev">Skypack</a>:</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'https://cdn.skypack.dev/remark-rehype@10?dts'</span>
</span></code></pre>
<p>In browsers with <a href="https://www.skypack.dev">Skypack</a>:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript">  <span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'https://cdn.skypack.dev/remark-rehype@10?min'</span>
</span></span></span><span class="code-line"><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="use"><a aria-hidden="true" tabindex="-1" href="#use"><span class="icon icon-link"></span></a>Use</h2><div class="wrap-body">
<p>Say we have the following file <code>example.md</code>:</p>
<pre class="language-markdown"><code class="language-markdown code-highlight"><span class="code-line"><span class="token title important"><span class="token punctuation">#</span> Hello world</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token blockquote punctuation">></span> Block quote.
</span><span class="code-line">
</span><span class="code-line">Some <span class="token italic"><span class="token punctuation">_</span><span class="token content">emphasis</span><span class="token punctuation">_</span></span>, <span class="token bold"><span class="token punctuation">**</span><span class="token content">importance</span><span class="token punctuation">**</span></span>, and <span class="token code-snippet code keyword">`code`</span>.
</span></code></pre>
<p>And our module <code>example.js</code> looks as follows:</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>read<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'to-vfile'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>reporter<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vfile-reporter'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>unified<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'unified'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkParse</span> <span class="token keyword module">from</span> <span class="token string">'remark-parse'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'remark-rehype'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeDocument</span> <span class="token keyword module">from</span> <span class="token string">'rehype-document'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeFormat</span> <span class="token keyword module">from</span> <span class="token string">'rehype-format'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeStringify</span> <span class="token keyword module">from</span> <span class="token string">'rehype-stringify'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">unified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkParse<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkRehype<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeDocument<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeFormat<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeStringify<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">process</span><span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">'example.md'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token function">reporter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Now, running <code>node example.js</code> yields:</p>
<pre class="language-txt"><code class="language-txt code-highlight"><span class="code-line">example.md: no issues found
</span></code></pre>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token doctype"><span class="token punctuation">&#x3C;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>example<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span>Hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>blockquote</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Block quote.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>blockquote</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Some <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>em</span><span class="token punctuation">></span></span>emphasis<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>em</span><span class="token punctuation">></span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>strong</span><span class="token punctuation">></span></span>importance<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>strong</span><span class="token punctuation">></span></span>, and <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>code</span><span class="token punctuation">></span></span>code<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>code</span><span class="token punctuation">></span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span>
</span></code></pre>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="api"><a aria-hidden="true" tabindex="-1" href="#api"><span class="icon icon-link"></span></a>API</h2><div class="wrap-body">
<p>This package exports <code>defaultHandlers</code>, <code>all</code>, and <code>one</code>.
The default export is <code>remarkRehype</code>.</p>
</div></div><div class="h2wrap-body"><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="unifieduseremarkrehype-destination-options"><a aria-hidden="true" tabindex="-1" href="#unifieduseremarkrehype-destination-options"><span class="icon icon-link"></span></a><code>unified().use(remarkRehype[, destination][, options])</code></h3><div class="wrap-body">
<p>Plugin that turns markdown into HTML to support rehype.</p>
<h5 id="destination"><a aria-hidden="true" tabindex="-1" href="#destination"><span class="icon icon-link"></span></a><code>destination</code></h5>
<p>If a <a href="https://github.com/unifiedjs/unified#processor"><code>Unified</code></a> destination processor is given, that processor runs
with a new HTML (hast) tree (bridge-mode).
As the given processor runs with a hast tree, and rehype plugins support
hast, that means rehype plugins can be used with the given processor.
The hast tree is discarded in the end.</p>
<blockquote>
<p>👉 <strong>Note</strong>: It’s highly unlikely that you want to do this.</p>
</blockquote>
<h5 id="options"><a aria-hidden="true" tabindex="-1" href="#options"><span class="icon icon-link"></span></a><code>options</code></h5>
<p>Configuration (optional).</p>
<h6 id="optionsallowdangeroushtml"><a aria-hidden="true" tabindex="-1" href="#optionsallowdangeroushtml"><span class="icon icon-link"></span></a><code>options.allowDangerousHtml</code></h6>
<p>Whether to persist raw HTML in markdown in the hast tree (<code>boolean</code>, default:
<code>false</code>).
Raw HTML is available in the markdown (mdast) tree as <a href="https://github.com/syntax-tree/mdast#html"><code>html</code></a> nodes
and can be embedded in the HTML (hast) tree as semistandard <code>raw</code> nodes.
Most rehype plugins ignore <code>raw</code> nodes, but two notable plugins don’t:</p>
<ul>
<li><a href="https://github.com/rehypejs/rehype/tree/main/packages/rehype-stringify"><code>rehype-stringify</code></a> also has an option
<code>allowDangerousHtml</code> which will output the raw HTML.
This is typically discouraged as noted by the option name but is useful if
you completely trust who authors the markdown</li>
<li><a href="https://github.com/rehypejs/rehype-raw"><code>rehype-raw</code></a> can handle the raw embedded HTML strings in hast
trees by parsing them into standard hast nodes (element, text, etc).
This is a heavy task as it needs a full HTML parser, but it is the only way
to support untrusted content</li>
</ul>
<h6 id="optionsclobberprefix"><a aria-hidden="true" tabindex="-1" href="#optionsclobberprefix"><span class="icon icon-link"></span></a><code>options.clobberPrefix</code></h6>
<p>Prefix to use before the <code>id</code> attribute on footnotes to prevent it from
<em>clobbering</em> (<code>string</code>, default: <code>'user-content-'</code>).
DOM clobbering is this:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>x</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// `x` now refers to the DOM `p#x` element</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span></code></pre>
<p>Elements by their ID are made available by browsers on the <code>window</code> object,
which is a security risk.
Using a prefix solves this problem.</p>
<blockquote>
<p>👉 <strong>Note</strong>: this option affects footnotes.
Footnotes are not specified by CommonMark so they’re not supported in remark
by default.
They are supported by GitHub, so they can be enabled by using the remark
plugin <a href="https://github.com/remarkjs/remark-gfm"><code>remark-gfm</code></a>.</p>
</blockquote>
<h6 id="optionsfootnotelabel"><a aria-hidden="true" tabindex="-1" href="#optionsfootnotelabel"><span class="icon icon-link"></span></a><code>options.footnoteLabel</code></h6>
<p>Label to use for the footnotes section (<code>string</code>, default: <code>'Footnotes'</code>).
Affects screen readers.
Change it when the markdown is not in English.</p>
<blockquote>
<p>👉 <strong>Note</strong>: this option affects footnotes.
Footnotes are not specified by CommonMark so they’re not supported in remark
by default.
They are supported by GitHub, so they can be enabled by using the remark
plugin <a href="https://github.com/remarkjs/remark-gfm"><code>remark-gfm</code></a>.</p>
</blockquote>
<h6 id="optionsfootnotebacklabel"><a aria-hidden="true" tabindex="-1" href="#optionsfootnotebacklabel"><span class="icon icon-link"></span></a><code>options.footnoteBackLabel</code></h6>
<p>Label to use from backreferences back to their footnote call (<code>string</code>, default:
<code>'Back to content'</code>).
Affects screen readers.
Change it when the markdown is not in English.</p>
<blockquote>
<p>👉 <strong>Note</strong>: this option affects footnotes.
Footnotes are not specified by CommonMark so they’re not supported in remark
by default.
They are supported by GitHub, so they can be enabled by using the remark
plugin <a href="https://github.com/remarkjs/remark-gfm"><code>remark-gfm</code></a>.</p>
</blockquote>
<h6 id="optionshandlers"><a aria-hidden="true" tabindex="-1" href="#optionshandlers"><span class="icon icon-link"></span></a><code>options.handlers</code></h6>
<p>This option is a bit advanced as it requires knowledge of ASTs, so we defer
to the documentation available in <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>.</p>
<h6 id="optionspassthrough"><a aria-hidden="true" tabindex="-1" href="#optionspassthrough"><span class="icon icon-link"></span></a><code>options.passThrough</code></h6>
<p>This option is a bit advanced as it requires knowledge of ASTs, so we defer
to the documentation available in <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>.</p>
<h6 id="optionsunknownhandler"><a aria-hidden="true" tabindex="-1" href="#optionsunknownhandler"><span class="icon icon-link"></span></a><code>options.unknownHandler</code></h6>
<p>This option is a bit advanced as it requires knowledge of ASTs, so we defer
to the documentation available in <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="defaulthandlers"><a aria-hidden="true" tabindex="-1" href="#defaulthandlers"><span class="icon icon-link"></span></a><code>defaultHandlers</code></h3><div class="wrap-body">
<p>The <code>defaultHandlers</code> export from <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>,
useful when passing in your own handlers.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="all"><a aria-hidden="true" tabindex="-1" href="#all"><span class="icon icon-link"></span></a><code>all</code></h3><div class="wrap-body">
<p>The <code>all</code> export from <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>,
useful when passing in your own handlers.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="one"><a aria-hidden="true" tabindex="-1" href="#one"><span class="icon icon-link"></span></a><code>one</code></h3><div class="wrap-body">
<p>The <code>one</code> export from <a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>,
useful when passing in your own handlers.</p>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="examples"><a aria-hidden="true" tabindex="-1" href="#examples"><span class="icon icon-link"></span></a>Examples</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="example-supporting-html-in-markdown-naïvely"><a aria-hidden="true" tabindex="-1" href="#example-supporting-html-in-markdown-naïvely"><span class="icon icon-link"></span></a>Example: supporting HTML in markdown naïvely</h3><div class="wrap-body">
<p>If you completely trust the authors of the input markdown and want to allow them
to write HTML inside markdown, you can pass <code>allowDangerousHtml</code> to this plugin
(<code>remark-rehype</code>) and <code>rehype-stringify</code>:</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>unified<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'unified'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkParse</span> <span class="token keyword module">from</span> <span class="token string">'remark-parse'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'remark-rehype'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeStringify</span> <span class="token keyword module">from</span> <span class="token string">'rehype-stringify'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">unified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkParse<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkRehype<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">allowDangerousHtml</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeStringify<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">allowDangerousHtml</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">process</span><span class="token punctuation">(</span><span class="token string">'It &#x3C;i>works&#x3C;/i>! &#x3C;img onerror="alert(1)">'</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Running that code yields:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>It <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>i</span><span class="token punctuation">></span></span>works<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>i</span><span class="token punctuation">></span></span>! <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span> <span class="token special-attr"><span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span></code></pre>
<blockquote>
<p>⚠️ <strong>Danger</strong>: Observe that the XSS attack through the <code>onerror</code> attribute
is still present.</p>
</blockquote>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="example-supporting-html-in-markdown-properly"><a aria-hidden="true" tabindex="-1" href="#example-supporting-html-in-markdown-properly"><span class="icon icon-link"></span></a>Example: supporting HTML in markdown properly</h3><div class="wrap-body">
<p>If you do not trust the authors of the input markdown, or if you want to make
sure that rehype plugins can see HTML embedded in markdown, use
<a href="https://github.com/rehypejs/rehype-raw"><code>rehype-raw</code></a>.
The following example passes <code>allowDangerousHtml</code> to this plugin
(<code>remark-rehype</code>), then turns the raw embedded HTML into proper HTML nodes
(<code>rehype-raw</code>), and finally sanitizes the HTML by only allowing safe things
(<code>rehype-sanitize</code>):</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>unified<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'unified'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkParse</span> <span class="token keyword module">from</span> <span class="token string">'remark-parse'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'remark-rehype'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeRaw</span> <span class="token keyword module">from</span> <span class="token string">'rehype-raw'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeSanitize</span> <span class="token keyword module">from</span> <span class="token string">'rehype-sanitize'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeStringify</span> <span class="token keyword module">from</span> <span class="token string">'rehype-stringify'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">unified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkParse<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkRehype<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">allowDangerousHtml</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeRaw<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeSanitize<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeStringify<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">process</span><span class="token punctuation">(</span><span class="token string">'It &#x3C;i>works&#x3C;/i>! &#x3C;img onerror="alert(1)">'</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Running that code yields:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>It <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>i</span><span class="token punctuation">></span></span>works<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>i</span><span class="token punctuation">></span></span>! <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>img</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span></code></pre>
<blockquote>
<p>👉 <strong>Note</strong>: Observe that the XSS attack through the <code>onerror</code> attribute
is no longer present.</p>
</blockquote>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="example-footnotes-in-languages-other-than-english"><a aria-hidden="true" tabindex="-1" href="#example-footnotes-in-languages-other-than-english"><span class="icon icon-link"></span></a>Example: footnotes in languages other than English</h3><div class="wrap-body">
<p>If you know that the markdown is authored in a language other than English,
and you’re using <code>remark-gfm</code> to match how GitHub renders markdown, and you know
that footnotes are (or can?) be used, you should translate the labels associated
with them.</p>
<p>Let’s first set the stage:</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>unified<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'unified'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkParse</span> <span class="token keyword module">from</span> <span class="token string">'remark-parse'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkGfm</span> <span class="token keyword module">from</span> <span class="token string">'remark-gfm'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">remarkRehype</span> <span class="token keyword module">from</span> <span class="token string">'remark-rehype'</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">rehypeStringify</span> <span class="token keyword module">from</span> <span class="token string">'rehype-stringify'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">unified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkParse<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkGfm<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remarkRehype<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypeStringify<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">process</span><span class="token punctuation">(</span><span class="token string">'Hallo[^1]\n\n[^1]: Wereld!'</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Running that code yields:</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Hallo<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>sup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#user-content-fn-1<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user-content-fnref-1<span class="token punctuation">"</span></span> <span class="token attr-name">data-footnote-ref</span> <span class="token attr-name">aria-describedby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footnote-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>sup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>section</span> <span class="token attr-name">data-footnotes</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footnotes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footnote-label<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Footnotes<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ol</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>li</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user-content-fn-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span><span class="token punctuation">></span></span>Wereld! <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#user-content-fnref-1<span class="token punctuation">"</span></span> <span class="token attr-name">data-footnote-backref</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data-footnote-backref<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Back to content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>↩<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>li</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ol</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>section</span><span class="token punctuation">></span></span>
</span></code></pre>
<p>This is a mix of English and Dutch that screen readers can’t handle nicely.
Let’s say our program does know that the markdown is in Dutch.
In that case, it’s important to translate and define the labels relating to
footnotes so that screen reader users can properly pronounce the page:</p>
<pre class="language-diff"><code class="language-diff code-highlight"><span class="code-line">@@ -10,7 +10,7 @@ async function main() {
</span><span class="code-line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  const file = await unified()
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">    .use(remarkParse)
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">    .use(remarkGfm)
</span></span></span><span class="code-line deleted"><span class="token unchanged"><span class="token line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    .use(remarkRehype)
</span></span></span><span class="code-line inserted"><span class="token deleted-sign deleted"><span class="token line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    .use(remarkRehype, {footnoteLabel: 'Voetnoten', footnoteBackLabel: 'Terug'})
</span></span></span><span class="code-line"><span class="token inserted-sign inserted"><span class="token line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    .use(rehypeStringify)
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">    .process('Hallo[^1]\n\n[^1]: Wereld!')
</span></span></span></code></pre>
<p>Running the code with the above patch applied, yields:</p>
<pre class="language-diff"><code class="language-diff code-highlight"><span class="code-line"><span class="token coord">@@ -1,8 +1,8 @@</span>
</span><span class="code-line"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&#x3C;p>Hallo&#x3C;sup>&#x3C;a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref aria-describedby="footnote-label">1&#x3C;/a>&#x3C;/sup>&#x3C;/p>
</span></span></span><span class="code-line deleted"><span class="token unchanged"><span class="token line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">&#x3C;section data-footnotes class="footnotes">&#x3C;h2 id="footnote-label" class="sr-only">Footnotes&#x3C;/h2>
</span></span></span><span class="code-line inserted"><span class="token deleted-sign deleted"><span class="token line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">&#x3C;section data-footnotes class="footnotes">&#x3C;h2 id="footnote-label" class="sr-only">Voetnoten&#x3C;/h2>
</span></span></span><span class="code-line"><span class="token inserted-sign inserted"><span class="token line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&#x3C;ol>
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">&#x3C;li id="user-content-fn-1">
</span></span></span><span class="code-line deleted"><span class="token unchanged"><span class="token line"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">&#x3C;p>Wereld! &#x3C;a href="#user-content-fnref-1" data-footnote-backref class="data-footnote-backref" aria-label="Back to content">↩&#x3C;/a>&#x3C;/p>
</span></span></span><span class="code-line inserted"><span class="token deleted-sign deleted"><span class="token line"></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">&#x3C;p>Wereld! &#x3C;a href="#user-content-fnref-1" data-footnote-backref class="data-footnote-backref" aria-label="Terug">↩&#x3C;/a>&#x3C;/p>
</span></span></span><span class="code-line"><span class="token inserted-sign inserted"><span class="token line"></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&#x3C;/li>
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">&#x3C;/ol>
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token prefix unchanged"> </span><span class="token line">&#x3C;/section>
</span></span></span></code></pre>
</div></div></div></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="syntax-tree"><a aria-hidden="true" tabindex="-1" href="#syntax-tree"><span class="icon icon-link"></span></a>Syntax tree</h2><div class="wrap-body">
<p>A frequent problem arises when having to turn one syntax tree into another.
As the original tree (in this case, mdast for markdown) is in some cases
limited compared to the destination (in this case, hast for HTML) tree,
is it possible to provide more info in the original to define what the
result will be in the destination?
This is possible by defining data on mdast nodes, which this plugin will read
as instructions on what hast nodes to create.</p>
<p>An example is <code>remark-math</code>, which defines semistandard math nodes that this
plugin doesn’t understand.
To solve this, <code>remark-math</code> defines instructions on mdast nodes that this
plugin does understand because they define a certain hast structure.</p>
<p>As these instructions are somewhat advanced in that they requires knowledge of
ASTs, we defer to the documentation available in the low level utility we use:
<a href="https://github.com/syntax-tree/mdast-util-to-hast"><code>mdast-util-to-hast</code></a>.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="css"><a aria-hidden="true" tabindex="-1" href="#css"><span class="icon icon-link"></span></a>CSS</h2><div class="wrap-body">
<p>Assuming you know how to use (semantic) HTML and CSS, then it should generally
be straight forward to style the HTML produced by this plugin.
With CSS, you can get creative and style the results as you please.</p>
<p>Some semistandard features, notably <a href="https://github.com/remarkjs/remark-gfm"><code>remark-gfm</code></a>s tasklists and
footnotes, generate HTML that be unintuitive, as it matches exactly what GitHub
produces for their website.
There is a project, <a href="https://github.com/sindresorhus/github-markdown-css"><code>sindresorhus/github-markdown-css</code></a>,
that exposes the stylesheet that GitHub uses for rendered markdown, which might
either be inspirational for more complex features, or can be used as-is to
exactly match how GitHub styles rendered markdown.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="types"><a aria-hidden="true" tabindex="-1" href="#types"><span class="icon icon-link"></span></a>Types</h2><div class="wrap-body">
<p>This package is fully typed with <a href="https://www.typescriptlang.org">TypeScript</a>.
It exports <code>Options</code> and <code>Processor</code> types, which specify the interfaces of the
accepted options.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="compatibility"><a aria-hidden="true" tabindex="-1" href="#compatibility"><span class="icon icon-link"></span></a>Compatibility</h2><div class="wrap-body">
<p>Projects maintained by the unified collective are compatible with all maintained
versions of Node.js.
As of now, that is Node.js 12.20+, 14.14+, and 16.0+.
Our projects sometimes work with older versions, but this is not guaranteed.</p>
<p>This plugin works with <code>unified</code> version 6+, <code>remark-parse</code> version 3+ (used in
<code>remark</code> version 7), and <code>rehype-stringify</code> version 3+ (used in <code>rehype</code>
version 5).</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="security"><a aria-hidden="true" tabindex="-1" href="#security"><span class="icon icon-link"></span></a>Security</h2><div class="wrap-body">
<p>Use of <code>remark-rehype</code> can open you up to a <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">cross-site scripting (XSS)</a>
attack.
Embedded <strong><a href="https://github.com/syntax-tree/hast">hast</a></strong> properties (<code>hName</code>, <code>hProperties</code>, <code>hChildren</code>) in
<a href="https://github.com/syntax-tree/mdast">mdast</a>, custom handlers, and the <code>allowDangerousHtml</code> option all provide
openings.
Use <a href="https://github.com/rehypejs/rehype-sanitize"><code>rehype-sanitize</code></a> to make the tree safe.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="related"><a aria-hidden="true" tabindex="-1" href="#related"><span class="icon icon-link"></span></a>Related</h2><div class="wrap-body">
<ul>
<li><a href="https://github.com/rehypejs/rehype-raw"><code>rehype-raw</code></a>
— rehype plugin to parse the tree again and support <code>raw</code> nodes</li>
<li><a href="https://github.com/rehypejs/rehype-sanitize"><code>rehype-sanitize</code></a>
— rehype plugin to sanitize HTML</li>
<li><a href="https://github.com/rehypejs/rehype-remark"><code>rehype-remark</code></a>
— rehype plugin to turn HTML into markdown</li>
<li><a href="https://github.com/rehypejs/rehype-retext"><code>rehype-retext</code></a>
— rehype plugin to support retext</li>
<li><a href="https://github.com/remarkjs/remark-retext"><code>remark-retext</code></a>
— remark plugin to support retext</li>
</ul>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="contribute"><a aria-hidden="true" tabindex="-1" href="#contribute"><span class="icon icon-link"></span></a>Contribute</h2><div class="wrap-body">
<p>See <a href="https://github.com/remarkjs/.github/blob/HEAD/contributing.md"><code>contributing.md</code></a> in <a href="https://github.com/remarkjs/.github"><code>remarkjs/.github</code></a> for ways
to get started.
See <a href="https://github.com/remarkjs/.github/blob/HEAD/support.md"><code>support.md</code></a> for ways to get help.</p>
<p>This project has a <a href="https://github.com/remarkjs/.github/blob/HEAD/code-of-conduct.md">code of conduct</a>.
By interacting with this repository, organization, or community you agree to
abide by its terms.</p>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="license"><a aria-hidden="true" tabindex="-1" href="#license"><span class="icon icon-link"></span></a>License</h2><div class="wrap-body">
<p><a href="license">MIT</a> © <a href="https://wooorm.com">Titus Wormer</a></p>
<!-- Definitions -->
</div></div><div class="h2wrap-body"></div></div></div></div><footer class="footer-wrap"><footer class="max-container">© 2022 Kenny Wang.</footer></footer><script>
if(('onhashchange' in window) && ((typeof document.documentMode==='undefined') || document.documentMode==8)) {
  window.onhashchange = function () {
    anchorPoint()
    updateAnchor()
  };
}
function anchorPoint() {
  const hash = window.location.hash?.replace(/^#/, '') || '';
  const elm = document.getElementById(decodeURIComponent(hash));
  Array.from(document.querySelectorAll('.h2wrap-body .wrap')).forEach((elm) => elm.classList.remove('active'))
  if (elm?.tagName === 'H3') {
    elm?.parentElement?.parentElement?.classList.add('active');
  }
}
anchorPoint();

function updateAnchor(element) {
  const anchorContainer = document.querySelectorAll('.menu-tocs .menu-modal a.tocs-link');
  anchorContainer.forEach((tocanchor) => {
    tocanchor.classList.remove('is-active-link');
  });
  const anchor = element || document.querySelector(`a.tocs-link[href='${decodeURIComponent(window.location.hash)}']`);
  if (anchor) {
    anchor.classList.add('is-active-link');
  }
}
// toc 定位
updateAnchor()
const anchor = document.querySelectorAll('.menu-tocs .menu-modal a.tocs-link');
anchor.forEach((item) => {
  item.addEventListener('click', (e) => {
    updateAnchor()
  })
})
</script></body>
</html>
