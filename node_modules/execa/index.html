<!doctype html>
<html lang="en" data-color-mode="dark">
<head>
<meta charset="utf-8">
<title>&#x3C;img src &#x26;  index cheatsheet &#x26;  Quick Reference</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta description="为开发人员分享快速参考备忘单。">
<meta keywords="Quick,Reference,cheatsheet,index">
<link rel="icon" href="data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%221em%22%20width%3D%221em%22%3E%20%3Cpath%20d%3D%22m21.66%2010.44-.98%204.18c-.84%203.61-2.5%205.07-5.62%204.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2%201.17-2.42%203.16-3.07%206.5-2.28l1.67.39c4.19.98%205.47%203.05%204.49%207.23Z%22%20fill%3D%22%23c9d1d9%22%2F%3E%20%3Cpath%20d%3D%22M15.06%2019.39c-.62.42-1.4.77-2.35%201.08l-1.58.52c-3.97%201.28-6.06.21-7.35-3.76L2.5%2013.28c-1.28-3.97-.22-6.07%203.75-7.35l1.58-.52c.41-.13.8-.24%201.17-.31-.3.61-.54%201.35-.74%202.2l-.98%204.19c-.98%204.18.31%206.24%204.48%207.23l1.68.4c.58.14%201.12.23%201.62.27Zm2.43-8.88c-.06%200-.12-.01-.19-.02l-4.85-1.23a.75.75%200%200%201%20.37-1.45l4.85%201.23a.748.748%200%200%201-.18%201.47Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3Cpath%20d%3D%22M14.56%2013.89c-.06%200-.12-.01-.19-.02l-2.91-.74a.75.75%200%200%201%20.37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z%22%20fill%3D%22%23228e6c%22%20%2F%3E%20%3C%2Fsvg%3E" type="image/svg+xml">
<link rel="stylesheet" href="..\..\style\style.css">
<link rel="stylesheet" href="..\..\style\katex.css">
</head>
<body><nav class="header-nav"><div class="max-container"><a href="..\..\index.html" class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
  <path d="m21.66 10.44-.98 4.18c-.84 3.61-2.5 5.07-5.62 4.77-.5-.04-1.04-.13-1.62-.27l-1.68-.4c-4.17-.99-5.46-3.05-4.48-7.23l.98-4.19c.2-.85.44-1.59.74-2.2 1.17-2.42 3.16-3.07 6.5-2.28l1.67.39c4.19.98 5.47 3.05 4.49 7.23Z" fill="#c9d1d9"></path>
  <path d="M15.06 19.39c-.62.42-1.4.77-2.35 1.08l-1.58.52c-3.97 1.28-6.06.21-7.35-3.76L2.5 13.28c-1.28-3.97-.22-6.07 3.75-7.35l1.58-.52c.41-.13.8-.24 1.17-.31-.3.61-.54 1.35-.74 2.2l-.98 4.19c-.98 4.18.31 6.24 4.48 7.23l1.68.4c.58.14 1.12.23 1.62.27Zm2.43-8.88c-.06 0-.12-.01-.19-.02l-4.85-1.23a.75.75 0 0 1 .37-1.45l4.85 1.23a.748.748 0 0 1-.18 1.47Z" fill="#228e6c"></path>
  <path d="M14.56 13.89c-.06 0-.12-.01-.19-.02l-2.91-.74a.75.75 0 0 1 .37-1.45l2.91.74c.4.1.64.51.54.91-.08.34-.38.56-.72.56Z" fill="#228e6c"></path>
</svg>
<span class="title">Quick Reference</span></a><div class="menu"><a href="https://github.com/jaywcjlove/reference/blob/main/node_modules/execa\readme.md" class="" target="__blank"><svg viewBox="0 0 36 36" fill="currentColor" height="1em" width="1em"><path d="m33 6.4-3.7-3.7a1.71 1.71 0 0 0-2.36 0L23.65 6H6a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h22a2 2 0 0 0 2-2V11.76l3-3a1.67 1.67 0 0 0 0-2.36ZM18.83 20.13l-4.19.93 1-4.15 9.55-9.57 3.23 3.23ZM29.5 9.43 26.27 6.2l1.85-1.85 3.23 3.23Z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg><span>编辑</span></a><button id="darkMode" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="light" height="1em" width="1em">
  <path d="M6.995 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007-2.246-5.007-5.007-5.007S6.995 9.239 6.995 12zM11 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2H2zm17 0h3v2h-3zM5.637 19.778l-1.414-1.414 2.121-2.121 1.414 1.414zM16.242 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.344 7.759 4.223 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"></path>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="dark" height="1em" width="1em">
  <path d="M12 11.807A9.002 9.002 0 0 1 10.049 2a9.942 9.942 0 0 0-5.12 2.735c-3.905 3.905-3.905 10.237 0 14.142 3.906 3.906 10.237 3.905 14.143 0a9.946 9.946 0 0 0 2.735-5.119A9.003 9.003 0 0 1 12 11.807z"></path>
</svg>
</button><script>
  const LOCAL_NANE = '_dark_mode_theme_'
  const rememberedValue = localStorage.getItem(LOCAL_NANE);
  if (rememberedValue && ['light', 'dark'].includes(rememberedValue)) {
    document.documentElement.setAttribute('data-color-mode', rememberedValue);
  }
  const button = document.querySelector('#darkMode');
  button.onclick = () => {
    const theme = document.documentElement.dataset.colorMode;
    const mode = theme === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-color-mode', mode);
    localStorage.setItem(LOCAL_NANE, mode);
  }
</script><a href="https://github.com/jaywcjlove/reference" class="" target="__blank"><svg viewBox="0 0 16 16" fill="currentColor" height="1em" width="1em"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></div></nav><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="why"><a aria-hidden="true" tabindex="-1" href="#why"><span class="icon icon-link"></span></a>Why</h2><div class="wrap-body">
<p>This package improves <a href="https://nodejs.org/api/child_process.html"><code>child_process</code></a> methods with:</p>
<ul>
<li>Promise interface.</li>
<li><a href="#stripfinalnewline">Strips the final newline</a> from the output so you don't have to do <code>stdout.trim()</code>.</li>
<li>Supports <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a> binaries cross-platform.</li>
<li><a href="https://github.com/IndigoUnited/node-cross-spawn#why">Improved Windows support.</a></li>
<li>Higher max buffer. 100 MB instead of 200 KB.</li>
<li><a href="#preferlocal">Executes locally installed binaries by name.</a></li>
<li><a href="#cleanup">Cleans up spawned processes when the parent process dies.</a></li>
<li><a href="#all">Get interleaved output</a> from <code>stdout</code> and <code>stderr</code> similar to what is printed on the terminal. <a href="#execasyncfile-arguments-options"><em>(Async only)</em></a></li>
<li><a href="#execacommandcommand-options">Can specify file and arguments as a single string without a shell</a></li>
<li>More descriptive errors.</li>
</ul>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="install"><a aria-hidden="true" tabindex="-1" href="#install"><span class="icon icon-link"></span></a>Install</h2><div class="wrap-body">
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> execa
</span></code></pre>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="usage"><a aria-hidden="true" tabindex="-1" href="#usage"><span class="icon icon-link"></span></a>Usage</h2><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span>stdout<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'echo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'unicorns'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token comment">//=> 'unicorns'</span>
</span></code></pre>
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="pipe-the-child-process-stdout-to-the-parent"><a aria-hidden="true" tabindex="-1" href="#pipe-the-child-process-stdout-to-the-parent"><span class="icon icon-link"></span></a>Pipe the child process stdout to the parent</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'echo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'unicorns'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="handling-errors"><a aria-hidden="true" tabindex="-1" href="#handling-errors"><span class="icon icon-link"></span></a>Handling Errors</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Catching an error</span>
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword control-flow">await</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'command'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">	{
</span></span><span class="code-line"><span class="token comment">		message: 'Command failed with ENOENT: unknown command spawn unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		errno: -2,
</span></span><span class="code-line"><span class="token comment">		code: 'ENOENT',
</span></span><span class="code-line"><span class="token comment">		syscall: 'spawn unknown',
</span></span><span class="code-line"><span class="token comment">		path: 'unknown',
</span></span><span class="code-line"><span class="token comment">		spawnargs: ['command'],
</span></span><span class="code-line"><span class="token comment">		originalMessage: 'spawn unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		shortMessage: 'Command failed with ENOENT: unknown command spawn unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		command: 'unknown command',
</span></span><span class="code-line"><span class="token comment">		escapedCommand: 'unknown command',
</span></span><span class="code-line"><span class="token comment">		stdout: '',
</span></span><span class="code-line"><span class="token comment">		stderr: '',
</span></span><span class="code-line"><span class="token comment">		all: '',
</span></span><span class="code-line"><span class="token comment">		failed: true,
</span></span><span class="code-line"><span class="token comment">		timedOut: false,
</span></span><span class="code-line"><span class="token comment">		isCanceled: false,
</span></span><span class="code-line"><span class="token comment">		killed: false
</span></span><span class="code-line"><span class="token comment">	}
</span></span><span class="code-line"><span class="token comment">	*/</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="cancelling-a-spawned-process"><a aria-hidden="true" tabindex="-1" href="#cancelling-a-spawned-process"><span class="icon icon-link"></span></a>Cancelling a spawned process</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> abortController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'node'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">signal</span><span class="token operator">:</span> abortController<span class="token punctuation">.</span><span class="token property-access">signal</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">	abortController<span class="token punctuation">.</span><span class="token method function property-access">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword control-flow">await</span> subprocess<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>subprocess<span class="token punctuation">.</span><span class="token property-access">killed</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</span><span class="code-line">	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token property-access">isCanceled</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="catching-an-error-with-the-sync-method"><a aria-hidden="true" tabindex="-1" href="#catching-an-error-with-the-sync-method"><span class="icon icon-link"></span></a>Catching an error with the sync method</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execaSync<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token function">execaSync</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'command'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">	{
</span></span><span class="code-line"><span class="token comment">		message: 'Command failed with ENOENT: unknown command spawnSync unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		errno: -2,
</span></span><span class="code-line"><span class="token comment">		code: 'ENOENT',
</span></span><span class="code-line"><span class="token comment">		syscall: 'spawnSync unknown',
</span></span><span class="code-line"><span class="token comment">		path: 'unknown',
</span></span><span class="code-line"><span class="token comment">		spawnargs: ['command'],
</span></span><span class="code-line"><span class="token comment">		originalMessage: 'spawnSync unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		shortMessage: 'Command failed with ENOENT: unknown command spawnSync unknown ENOENT',
</span></span><span class="code-line"><span class="token comment">		command: 'unknown command',
</span></span><span class="code-line"><span class="token comment">		escapedCommand: 'unknown command',
</span></span><span class="code-line"><span class="token comment">		stdout: '',
</span></span><span class="code-line"><span class="token comment">		stderr: '',
</span></span><span class="code-line"><span class="token comment">		all: '',
</span></span><span class="code-line"><span class="token comment">		failed: true,
</span></span><span class="code-line"><span class="token comment">		timedOut: false,
</span></span><span class="code-line"><span class="token comment">		isCanceled: false,
</span></span><span class="code-line"><span class="token comment">		killed: false
</span></span><span class="code-line"><span class="token comment">	}
</span></span><span class="code-line"><span class="token comment">	*/</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="kill-a-process"><a aria-hidden="true" tabindex="-1" href="#kill-a-process"><span class="icon icon-link"></span></a>Kill a process</h3><div class="wrap-body">
<p>Using SIGTERM, and after 2 seconds, kill it with SIGKILL.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">	subprocess<span class="token punctuation">.</span><span class="token method function property-access">kill</span><span class="token punctuation">(</span><span class="token string">'SIGTERM'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token literal-property property">forceKillAfterTimeout</span><span class="token operator">:</span> <span class="token number">2000</span>
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="api"><a aria-hidden="true" tabindex="-1" href="#api"><span class="icon icon-link"></span></a>API</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="execafile-arguments-options"><a aria-hidden="true" tabindex="-1" href="#execafile-arguments-options"><span class="icon icon-link"></span></a>execa(file, arguments, options?)</h3><div class="wrap-body">
<p>Execute a file. Think of this as a mix of <a href="https://nodejs.org/api/child_process.html#child_process_child_process_execfile_file_args_options_callback"><code>child_process.execFile()</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code>child_process.spawn()</code></a>.</p>
<p>No escaping/quoting is needed.</p>
<p>Unless the <a href="#shell"><code>shell</code></a> option is used, no shell interpreter (Bash, <code>cmd.exe</code>, etc.) is used, so shell features such as variables substitution (<code>echo $PATH</code>) are not allowed.</p>
<p>Returns a <a href="https://nodejs.org/api/child_process.html#child_process_class_childprocess"><code>child_process</code> instance</a> which:</p>
<ul>
<li>is also a <code>Promise</code> resolving or rejecting with a <a href="#childProcessResult"><code>childProcessResult</code></a>.</li>
<li>exposes the following additional methods and properties.</li>
</ul>
<h4 id="killsignal-options"><a aria-hidden="true" tabindex="-1" href="#killsignal-options"><span class="icon icon-link"></span></a>kill(signal?, options?)</h4>
<p>Same as the original <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal"><code>child_process#kill()</code></a> except: if <code>signal</code> is <code>SIGTERM</code> (the default value) and the child process is not terminated after 5 seconds, force it by sending <code>SIGKILL</code>.</p>
<h5 id="optionsforcekillaftertimeout"><a aria-hidden="true" tabindex="-1" href="#optionsforcekillaftertimeout"><span class="icon icon-link"></span></a>options.forceKillAfterTimeout</h5>
<p>Type: <code>number | false</code><br>
Default: <code>5000</code></p>
<p>Milliseconds to wait for the child process to terminate before sending <code>SIGKILL</code>.</p>
<p>Can be disabled with <code>false</code>.</p>
<h4 id="all"><a aria-hidden="true" tabindex="-1" href="#all"><span class="icon icon-link"></span></a>all</h4>
<p>Type: <code>ReadableStream | undefined</code></p>
<p>Stream combining/interleaving <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stdout"><code>stdout</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stderr"><code>stderr</code></a>.</p>
<p>This is <code>undefined</code> if either:</p>
<ul>
<li>the <a href="#all-2"><code>all</code> option</a> is <code>false</code> (the default value)</li>
<li>both <a href="#stdout-1"><code>stdout</code></a> and <a href="#stderr-1"><code>stderr</code></a> options are set to <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>'inherit'</code>, <code>'ipc'</code>, <code>Stream</code> or <code>integer</code></a></li>
</ul>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="execasyncfile-arguments-options"><a aria-hidden="true" tabindex="-1" href="#execasyncfile-arguments-options"><span class="icon icon-link"></span></a>execaSync(file, arguments?, options?)</h3><div class="wrap-body">
<p>Execute a file synchronously.</p>
<p>Returns or throws a <a href="#childProcessResult"><code>childProcessResult</code></a>.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="execacommandcommand-options"><a aria-hidden="true" tabindex="-1" href="#execacommandcommand-options"><span class="icon icon-link"></span></a>execaCommand(command, options?)</h3><div class="wrap-body">
<p>Same as <a href="#execafile-arguments-options"><code>execa()</code></a> except both file and arguments are specified in a single <code>command</code> string. For example, <code>execa('echo', ['unicorns'])</code> is the same as <code>execaCommand('echo unicorns')</code>.</p>
<p>If the file or an argument contains spaces, they must be escaped with backslashes. This matters especially if <code>command</code> is not a constant but a variable, for example with <code>__dirname</code> or <code>process.cwd()</code>. Except for spaces, no escaping/quoting is needed.</p>
<p>The <a href="#shell"><code>shell</code> option</a> must be used if the <code>command</code> uses shell-specific features (for example, <code>&#x26;&#x26;</code> or <code>||</code>), as opposed to being a simple <code>file</code> followed by its <code>arguments</code>.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="execacommandsynccommand-options"><a aria-hidden="true" tabindex="-1" href="#execacommandsynccommand-options"><span class="icon icon-link"></span></a>execaCommandSync(command, options?)</h3><div class="wrap-body">
<p>Same as <a href="#execacommand-command-options"><code>execaCommand()</code></a> but synchronous.</p>
<p>Returns or throws a <a href="#childProcessResult"><code>childProcessResult</code></a>.</p>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="execanodescriptpath-arguments-options"><a aria-hidden="true" tabindex="-1" href="#execanodescriptpath-arguments-options"><span class="icon icon-link"></span></a>execaNode(scriptPath, arguments?, options?)</h3><div class="wrap-body">
<p>Execute a Node.js script as a child process.</p>
<p>Same as <code>execa('node', [scriptPath, ...arguments], options)</code> except (like <a href="https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options"><code>child_process#fork()</code></a>):</p>
<ul>
<li>the current Node version and options are used. This can be overridden using the <a href="#nodepath-for-node-only"><code>nodePath</code></a> and <a href="#nodeoptions-for-node-only"><code>nodeOptions</code></a> options.</li>
<li>the <a href="#shell"><code>shell</code></a> option cannot be used</li>
<li>an extra channel <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio"><code>ipc</code></a> is passed to <a href="#stdio"><code>stdio</code></a></li>
</ul>
</div></div></div><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="childprocessresult"><a aria-hidden="true" tabindex="-1" href="#childprocessresult"><span class="icon icon-link"></span></a>childProcessResult</h3><div class="wrap-body">
<p>Type: <code>object</code></p>
<p>Result of a child process execution. On success this is a plain object. On failure this is also an <code>Error</code> instance.</p>
<p>The child process <a href="#failed">fails</a> when:</p>
<ul>
<li>its <a href="#exitcode">exit code</a> is not <code>0</code></li>
<li>it was <a href="#killed">killed</a> with a <a href="#signal">signal</a></li>
<li><a href="#timedout">timing out</a></li>
<li><a href="#iscanceled">being canceled</a></li>
<li>there's not enough memory or there are already too many child processes</li>
</ul>
<h4 id="command"><a aria-hidden="true" tabindex="-1" href="#command"><span class="icon icon-link"></span></a>command</h4>
<p>Type: <code>string</code></p>
<p>The file and arguments that were run, for logging purposes.</p>
<p>This is not escaped and should not be executed directly as a process, including using <a href="#execafile-arguments-options"><code>execa()</code></a> or <a href="#execacommandcommand-options"><code>execaCommand()</code></a>.</p>
<h4 id="escapedcommand"><a aria-hidden="true" tabindex="-1" href="#escapedcommand"><span class="icon icon-link"></span></a>escapedCommand</h4>
<p>Type: <code>string</code></p>
<p>Same as <a href="#command"><code>command</code></a> but escaped.</p>
<p>This is meant to be copy and pasted into a shell, for debugging purposes.
Since the escaping is fairly basic, this should not be executed directly as a process, including using <a href="#execafile-arguments-options"><code>execa()</code></a> or <a href="#execacommandcommand-options"><code>execaCommand()</code></a>.</p>
<h4 id="exitcode"><a aria-hidden="true" tabindex="-1" href="#exitcode"><span class="icon icon-link"></span></a>exitCode</h4>
<p>Type: <code>number</code></p>
<p>The numeric exit code of the process that was run.</p>
<h4 id="stdout"><a aria-hidden="true" tabindex="-1" href="#stdout"><span class="icon icon-link"></span></a>stdout</h4>
<p>Type: <code>string | Buffer</code></p>
<p>The output of the process on stdout.</p>
<h4 id="stderr"><a aria-hidden="true" tabindex="-1" href="#stderr"><span class="icon icon-link"></span></a>stderr</h4>
<p>Type: <code>string | Buffer</code></p>
<p>The output of the process on stderr.</p>
<h4 id="all-1"><a aria-hidden="true" tabindex="-1" href="#all-1"><span class="icon icon-link"></span></a>all</h4>
<p>Type: <code>string | Buffer | undefined</code></p>
<p>The output of the process with <code>stdout</code> and <code>stderr</code> interleaved.</p>
<p>This is <code>undefined</code> if either:</p>
<ul>
<li>the <a href="#all-2"><code>all</code> option</a> is <code>false</code> (the default value)</li>
<li><code>execaSync()</code> was used</li>
</ul>
<h4 id="failed"><a aria-hidden="true" tabindex="-1" href="#failed"><span class="icon icon-link"></span></a>failed</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process failed to run.</p>
<h4 id="timedout"><a aria-hidden="true" tabindex="-1" href="#timedout"><span class="icon icon-link"></span></a>timedOut</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process timed out.</p>
<h4 id="iscanceled"><a aria-hidden="true" tabindex="-1" href="#iscanceled"><span class="icon icon-link"></span></a>isCanceled</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process was canceled.</p>
<p>You can cancel the spawned process using the <a href="#signal-1"><code>signal</code></a> option.</p>
<h4 id="killed"><a aria-hidden="true" tabindex="-1" href="#killed"><span class="icon icon-link"></span></a>killed</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process was killed.</p>
<h4 id="signal"><a aria-hidden="true" tabindex="-1" href="#signal"><span class="icon icon-link"></span></a>signal</h4>
<p>Type: <code>string | undefined</code></p>
<p>The name of the signal that was used to terminate the process. For example, <code>SIGFPE</code>.</p>
<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code>undefined</code>.</p>
<h4 id="signaldescription"><a aria-hidden="true" tabindex="-1" href="#signaldescription"><span class="icon icon-link"></span></a>signalDescription</h4>
<p>Type: <code>string | undefined</code></p>
<p>A human-friendly description of the signal that was used to terminate the process. For example, <code>Floating point arithmetic error</code>.</p>
<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code>undefined</code>. It is also <code>undefined</code> when the signal is very uncommon which should seldomly happen.</p>
<h4 id="message"><a aria-hidden="true" tabindex="-1" href="#message"><span class="icon icon-link"></span></a>message</h4>
<p>Type: <code>string</code></p>
<p>Error message when the child process failed to run. In addition to the <a href="#originalMessage">underlying error message</a>, it also contains some information related to why the child process errored.</p>
<p>The child process <a href="#stderr">stderr</a> then <a href="#stdout">stdout</a> are appended to the end, separated with newlines and not interleaved.</p>
<h4 id="shortmessage"><a aria-hidden="true" tabindex="-1" href="#shortmessage"><span class="icon icon-link"></span></a>shortMessage</h4>
<p>Type: <code>string</code></p>
<p>This is the same as the <a href="#message"><code>message</code> property</a> except it does not include the child process stdout/stderr.</p>
<h4 id="originalmessage"><a aria-hidden="true" tabindex="-1" href="#originalmessage"><span class="icon icon-link"></span></a>originalMessage</h4>
<p>Type: <code>string | undefined</code></p>
<p>Original error message. This is the same as the <code>message</code> property except it includes neither the child process stdout/stderr nor some additional information added by Execa.</p>
<p>This is <code>undefined</code> unless the child process exited due to an <code>error</code> event or a timeout.</p>
</div></div></div><div class="wrap h3body-exist"><div class="wrap-header h3wrap"><h3 id="options"><a aria-hidden="true" tabindex="-1" href="#options"><span class="icon icon-link"></span></a>options</h3><div class="wrap-body">
<p>Type: <code>object</code></p>
<h4 id="cleanup"><a aria-hidden="true" tabindex="-1" href="#cleanup"><span class="icon icon-link"></span></a>cleanup</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>Kill the spawned process when the parent process exits unless either:
- the spawned process is <a href="https://nodejs.org/api/child_process.html#child_process_options_detached"><code>detached</code></a>
- the parent process is terminated abruptly, for example, with <code>SIGKILL</code> as opposed to <code>SIGTERM</code> or a normal exit</p>
<h4 id="preferlocal"><a aria-hidden="true" tabindex="-1" href="#preferlocal"><span class="icon icon-link"></span></a>preferLocal</h4>
<p>Type: <code>boolean</code><br>
Default: <code>false</code></p>
<p>Prefer locally installed binaries when looking for a binary to execute.<br>
If you <code>$ npm install foo</code>, you can then <code>execa('foo')</code>.</p>
<h4 id="localdir"><a aria-hidden="true" tabindex="-1" href="#localdir"><span class="icon icon-link"></span></a>localDir</h4>
<p>Type: <code>string | URL</code><br>
Default: <code>process.cwd()</code></p>
<p>Preferred path to find locally installed binaries in (use with <code>preferLocal</code>).</p>
<p>Using a <code>URL</code> is only supported in Node.js <code>14.18.0</code>, <code>16.14.0</code> or above.</p>
<h4 id="execpath"><a aria-hidden="true" tabindex="-1" href="#execpath"><span class="icon icon-link"></span></a>execPath</h4>
<p>Type: <code>string</code><br>
Default: <code>process.execPath</code> (Current Node.js executable)</p>
<p>Path to the Node.js executable to use in child processes.</p>
<p>This can be either an absolute path or a path relative to the <a href="#cwd"><code>cwd</code> option</a>.</p>
<p>Requires <a href="#preferlocal"><code>preferLocal</code></a> to be <code>true</code>.</p>
<p>For example, this can be used together with <a href="https://github.com/ehmicky/get-node"><code>get-node</code></a> to run a specific Node.js version in a child process.</p>
<h4 id="buffer"><a aria-hidden="true" tabindex="-1" href="#buffer"><span class="icon icon-link"></span></a>buffer</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>Buffer the output from the spawned process. When set to <code>false</code>, you must read the output of <a href="#stdout-1"><code>stdout</code></a> and <a href="#stderr-1"><code>stderr</code></a> (or <a href="#all"><code>all</code></a> if the <a href="#all-2"><code>all</code></a> option is <code>true</code>). Otherwise the returned promise will not be resolved/rejected.</p>
<p>If the spawned process fails, <a href="#stdout"><code>error.stdout</code></a>, <a href="#stderr"><code>error.stderr</code></a>, and <a href="#all"><code>error.all</code></a> will contain the buffered data.</p>
<h4 id="input"><a aria-hidden="true" tabindex="-1" href="#input"><span class="icon icon-link"></span></a>input</h4>
<p>Type: <code>string | Buffer | stream.Readable</code></p>
<p>Write some input to the <code>stdin</code> of your binary.<br>
Streams are not allowed when using the synchronous methods.</p>
<h4 id="stdin"><a aria-hidden="true" tabindex="-1" href="#stdin"><span class="icon icon-link"></span></a>stdin</h4>
<p>Type: <code>string | number | Stream | undefined</code><br>
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="stdout-1"><a aria-hidden="true" tabindex="-1" href="#stdout-1"><span class="icon icon-link"></span></a>stdout</h4>
<p>Type: <code>string | number | Stream | undefined</code><br>
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="stderr-1"><a aria-hidden="true" tabindex="-1" href="#stderr-1"><span class="icon icon-link"></span></a>stderr</h4>
<p>Type: <code>string | number | Stream | undefined</code><br>
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="all-2"><a aria-hidden="true" tabindex="-1" href="#all-2"><span class="icon icon-link"></span></a>all</h4>
<p>Type: <code>boolean</code><br>
Default: <code>false</code></p>
<p>Add an <code>.all</code> property on the <a href="#all">promise</a> and the <a href="#all-1">resolved value</a>. The property contains the output of the process with <code>stdout</code> and <code>stderr</code> interleaved.</p>
<h4 id="reject"><a aria-hidden="true" tabindex="-1" href="#reject"><span class="icon icon-link"></span></a>reject</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>Setting this to <code>false</code> resolves the promise with the error instead of rejecting it.</p>
<h4 id="stripfinalnewline"><a aria-hidden="true" tabindex="-1" href="#stripfinalnewline"><span class="icon icon-link"></span></a>stripFinalNewline</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>Strip the final <a href="https://en.wikipedia.org/wiki/Newline">newline character</a> from the output.</p>
<h4 id="extendenv"><a aria-hidden="true" tabindex="-1" href="#extendenv"><span class="icon icon-link"></span></a>extendEnv</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>Set to <code>false</code> if you don't want to extend the environment variables when providing the <code>env</code> property.</p>
<hr>
<p>Execa also accepts the below options which are the same as the options for <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code>child_process#spawn()</code></a>/<a href="https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback"><code>child_process#exec()</code></a></p>
<h4 id="cwd"><a aria-hidden="true" tabindex="-1" href="#cwd"><span class="icon icon-link"></span></a>cwd</h4>
<p>Type: <code>string | URL</code><br>
Default: <code>process.cwd()</code></p>
<p>Current working directory of the child process.</p>
<p>Using a <code>URL</code> is only supported in Node.js <code>14.18.0</code>, <code>16.14.0</code> or above.</p>
<h4 id="env"><a aria-hidden="true" tabindex="-1" href="#env"><span class="icon icon-link"></span></a>env</h4>
<p>Type: <code>object</code><br>
Default: <code>process.env</code></p>
<p>Environment key-value pairs. Extends automatically from <code>process.env</code>. Set <a href="#extendenv"><code>extendEnv</code></a> to <code>false</code> if you don't want this.</p>
<h4 id="argv0"><a aria-hidden="true" tabindex="-1" href="#argv0"><span class="icon icon-link"></span></a>argv0</h4>
<p>Type: <code>string</code></p>
<p>Explicitly set the value of <code>argv[0]</code> sent to the child process. This will be set to <code>file</code> if not specified.</p>
<h4 id="stdio"><a aria-hidden="true" tabindex="-1" href="#stdio"><span class="icon icon-link"></span></a>stdio</h4>
<p>Type: <code>string | string[]</code><br>
Default: <code>pipe</code></p>
<p>Child's <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio">stdio</a> configuration.</p>
<h4 id="serialization"><a aria-hidden="true" tabindex="-1" href="#serialization"><span class="icon icon-link"></span></a>serialization</h4>
<p>Type: <code>string</code><br>
Default: <code>'json'</code></p>
<p>Specify the kind of serialization used for sending messages between processes when using the <a href="#stdio"><code>stdio: 'ipc'</code></a> option or <a href="#execanodescriptpath-arguments-options"><code>execaNode()</code></a>:
- <code>json</code>: Uses <code>JSON.stringify()</code> and <code>JSON.parse()</code>.
- <code>advanced</code>: Uses <a href="https://nodejs.org/api/v8.html#v8_v8_serialize_value"><code>v8.serialize()</code></a></p>
<p>Requires Node.js <code>13.2.0</code> or later.</p>
<p><a href="https://nodejs.org/api/child_process.html#child_process_advanced_serialization">More info.</a></p>
<h4 id="detached"><a aria-hidden="true" tabindex="-1" href="#detached"><span class="icon icon-link"></span></a>detached</h4>
<p>Type: <code>boolean</code></p>
<p>Prepare child to run independently of its parent process. Specific behavior <a href="https://nodejs.org/api/child_process.html#child_process_options_detached">depends on the platform</a>.</p>
<h4 id="uid"><a aria-hidden="true" tabindex="-1" href="#uid"><span class="icon icon-link"></span></a>uid</h4>
<p>Type: <code>number</code></p>
<p>Sets the user identity of the process.</p>
<h4 id="gid"><a aria-hidden="true" tabindex="-1" href="#gid"><span class="icon icon-link"></span></a>gid</h4>
<p>Type: <code>number</code></p>
<p>Sets the group identity of the process.</p>
<h4 id="shell"><a aria-hidden="true" tabindex="-1" href="#shell"><span class="icon icon-link"></span></a>shell</h4>
<p>Type: <code>boolean | string</code><br>
Default: <code>false</code></p>
<p>If <code>true</code>, runs <code>file</code> inside of a shell. Uses <code>/bin/sh</code> on UNIX and <code>cmd.exe</code> on Windows. A different shell can be specified as a string. The shell should understand the <code>-c</code> switch on UNIX or <code>/d /s /c</code> on Windows.</p>
<p>We recommend against using this option since it is:</p>
<ul>
<li>not cross-platform, encouraging shell-specific syntax.</li>
<li>slower, because of the additional shell interpretation.</li>
<li>unsafe, potentially allowing command injection.</li>
</ul>
<h4 id="encoding"><a aria-hidden="true" tabindex="-1" href="#encoding"><span class="icon icon-link"></span></a>encoding</h4>
<p>Type: <code>string | null</code><br>
Default: <code>utf8</code></p>
<p>Specify the character encoding used to decode the <code>stdout</code> and <code>stderr</code> output. If set to <code>null</code>, then <code>stdout</code> and <code>stderr</code> will be a <code>Buffer</code> instead of a string.</p>
<h4 id="timeout"><a aria-hidden="true" tabindex="-1" href="#timeout"><span class="icon icon-link"></span></a>timeout</h4>
<p>Type: <code>number</code><br>
Default: <code>0</code></p>
<p>If timeout is greater than <code>0</code>, the parent will send the signal identified by the <code>killSignal</code> property (the default is <code>SIGTERM</code>) if the child runs longer than timeout milliseconds.</p>
<h4 id="maxbuffer"><a aria-hidden="true" tabindex="-1" href="#maxbuffer"><span class="icon icon-link"></span></a>maxBuffer</h4>
<p>Type: <code>number</code><br>
Default: <code>100_000_000</code> (100 MB)</p>
<p>Largest amount of data in bytes allowed on <code>stdout</code> or <code>stderr</code>.</p>
<h4 id="killsignal"><a aria-hidden="true" tabindex="-1" href="#killsignal"><span class="icon icon-link"></span></a>killSignal</h4>
<p>Type: <code>string | number</code><br>
Default: <code>SIGTERM</code></p>
<p>Signal value to be used when the spawned process will be killed.</p>
<h4 id="signal-1"><a aria-hidden="true" tabindex="-1" href="#signal-1"><span class="icon icon-link"></span></a>signal</h4>
<p>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal"><code>AbortSignal</code></a></p>
<p>You can abort the spawned process using <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController"><code>AbortController</code></a>.</p>
<p>When <code>AbortController.abort()</code> is called, <a href="#iscanceled"><code>.isCanceled</code></a> becomes <code>false</code>.</p>
<p><em>Requires Node.js 16 or later.</em></p>
<h4 id="windowsverbatimarguments"><a aria-hidden="true" tabindex="-1" href="#windowsverbatimarguments"><span class="icon icon-link"></span></a>windowsVerbatimArguments</h4>
<p>Type: <code>boolean</code><br>
Default: <code>false</code></p>
<p>If <code>true</code>, no quoting or escaping of arguments is done on Windows. Ignored on other platforms. This is set to <code>true</code> automatically when the <code>shell</code> option is <code>true</code>.</p>
<h4 id="windowshide"><a aria-hidden="true" tabindex="-1" href="#windowshide"><span class="icon icon-link"></span></a>windowsHide</h4>
<p>Type: <code>boolean</code><br>
Default: <code>true</code></p>
<p>On Windows, do not create a new console window. Please note this also prevents <code>CTRL-C</code> <a href="https://github.com/nodejs/node/issues/29837">from working</a> on Windows.</p>
<h4 id="nodepath-for-node-only"><a aria-hidden="true" tabindex="-1" href="#nodepath-for-node-only"><span class="icon icon-link"></span></a>nodePath <em>(For <code>.node()</code> only)</em></h4>
<p>Type: <code>string</code><br>
Default: <a href="https://nodejs.org/api/process.html#process_process_execpath"><code>process.execPath</code></a></p>
<p>Node.js executable used to create the child process.</p>
<h4 id="nodeoptions-for-node-only"><a aria-hidden="true" tabindex="-1" href="#nodeoptions-for-node-only"><span class="icon icon-link"></span></a>nodeOptions <em>(For <code>.node()</code> only)</em></h4>
<p>Type: <code>string[]</code><br>
Default: <a href="https://nodejs.org/api/process.html#process_process_execargv"><code>process.execArgv</code></a></p>
<p>List of <a href="https://nodejs.org/api/cli.html#cli_options">CLI options</a> passed to the Node.js executable.</p>
</div></div></div></div></div><div class="wrap h2body-exist"><div class="wrap-header h2wrap"><h2 id="tips"><a aria-hidden="true" tabindex="-1" href="#tips"><span class="icon icon-link"></span></a>Tips</h2><div class="wrap-body">
</div></div><div class="h2wrap-body"><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="retry-on-error"><a aria-hidden="true" tabindex="-1" href="#retry-on-error"><span class="icon icon-link"></span></a>Retry on error</h3><div class="wrap-body">
<p>Gracefully handle failures by using automatic retries and exponential backoff with the <a href="https://github.com/sindresorhus/p-retry"><code>p-retry</code></a> package:</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">pRetry</span> <span class="token keyword module">from</span> <span class="token string">'p-retry'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'curl'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'-sSL'</span><span class="token punctuation">,</span> <span class="token string">'https://sindresorhus.com/unicorn'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token keyword control-flow">return</span> results<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token function">pRetry</span><span class="token punctuation">(</span>run<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">retries</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="save-and-pipe-output-from-a-child-process"><a aria-hidden="true" tabindex="-1" href="#save-and-pipe-output-from-a-child-process"><span class="icon icon-link"></span></a>Save and pipe output from a child process</h3><div class="wrap-body">
<p>Let's say you want to show the output of a child process in real-time while also saving it to a variable.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'echo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">subprocess<span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span>stdout<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> subprocess<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'child output:'</span><span class="token punctuation">,</span> stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="redirect-output-to-a-file"><a aria-hidden="true" tabindex="-1" href="#redirect-output-to-a-file"><span class="icon icon-link"></span></a>Redirect output to a file</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'echo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">subprocess<span class="token punctuation">.</span><span class="token property-access">stdout</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token method function property-access">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'stdout.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="redirect-input-from-a-file"><a aria-hidden="true" tabindex="-1" href="#redirect-input-from-a-file"><span class="icon icon-link"></span></a>Redirect input from a file</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>execa<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'execa'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span><span class="token string">'cat'</span><span class="token punctuation">)</span>
</span><span class="code-line">fs<span class="token punctuation">.</span><span class="token method function property-access">createReadStream</span><span class="token punctuation">(</span><span class="token string">'stdin.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>subprocess<span class="token punctuation">.</span><span class="token property-access">stdin</span><span class="token punctuation">)</span>
</span></code></pre>
</div></div></div><div class="wrap h3body-not-exist"><div class="wrap-header h3wrap"><h3 id="execute-the-current-packages-binary"><a aria-hidden="true" tabindex="-1" href="#execute-the-current-packages-binary"><span class="icon icon-link"></span></a>Execute the current package's binary</h3><div class="wrap-body">
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span>getBinPathSync<span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'get-bin-path'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> binPath <span class="token operator">=</span> <span class="token function">getBinPathSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> subprocess <span class="token operator">=</span> <span class="token function">execa</span><span class="token punctuation">(</span>binPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><code>execa</code> can be combined with <a href="https://github.com/ehmicky/get-bin-path"><code>get-bin-path</code></a> to test the current package's binary. As opposed to hard-coding the path to the binary, this validates that the <code>package.json</code> <code>bin</code> field is correctly set up.</p>
</div></div></div></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="related"><a aria-hidden="true" tabindex="-1" href="#related"><span class="icon icon-link"></span></a>Related</h2><div class="wrap-body">
<ul>
<li><a href="https://github.com/ehmicky/gulp-execa">gulp-execa</a> - Gulp plugin for <code>execa</code></li>
<li><a href="https://github.com/ehmicky/nvexeca">nvexeca</a> - Run <code>execa</code> using any Node.js version</li>
<li><a href="https://github.com/jorangreef/sudo-prompt">sudo-prompt</a> - Run commands with elevated privileges.</li>
</ul>
</div></div><div class="h2wrap-body"></div></div><div class="wrap h2body-not-exist"><div class="wrap-header h2wrap"><h2 id="maintainers"><a aria-hidden="true" tabindex="-1" href="#maintainers"><span class="icon icon-link"></span></a>Maintainers</h2><div class="wrap-body">
<ul>
<li><a href="https://github.com/sindresorhus">Sindre Sorhus</a></li>
<li><a href="https://github.com/ehmicky">@ehmicky</a></li>
</ul>
<hr>
<div align="center">
	<b>
		<a href="https://tidelift.com/subscription/pkg/npm-execa?utm_source=npm-execa&#x26;utm_medium=referral&#x26;utm_campaign=readme">Get professional support for this package with a Tidelift subscription</a>
	</b>
	<br>
	<sub>
		Tidelift helps make open source sustainable for maintainers while giving companies<br>assurances about security, maintenance, and licensing for their dependencies.
	</sub>
</div>
</div></div><div class="h2wrap-body"></div></div><footer class="footer-wrap"><footer class="max-container">© 2022 Kenny Wang.</footer></footer><script>
if(('onhashchange' in window) && ((typeof document.documentMode==='undefined') || document.documentMode==8)) {
  window.onhashchange = function () {
    anchorPoint()
    updateAnchor()
  };
}
function anchorPoint() {
  const hash = window.location.hash?.replace(/^#/, '') || '';
  const elm = document.getElementById(decodeURIComponent(hash));
  Array.from(document.querySelectorAll('.h2wrap-body .wrap')).forEach((elm) => elm.classList.remove('active'))
  if (elm?.tagName === 'H3') {
    elm?.parentElement?.parentElement?.classList.add('active');
  }
}
anchorPoint();

function updateAnchor(element) {
  const anchorContainer = document.querySelectorAll('.menu-tocs .menu-modal a.tocs-link');
  anchorContainer.forEach((tocanchor) => {
    tocanchor.classList.remove('is-active-link');
  });
  const anchor = element || document.querySelector(`a.tocs-link[href='${decodeURIComponent(window.location.hash)}']`);
  if (anchor) {
    anchor.classList.add('is-active-link');
  }
}
// toc 定位
updateAnchor()
const anchor = document.querySelectorAll('.menu-tocs .menu-modal a.tocs-link');
anchor.forEach((item) => {
  item.addEventListener('click', (e) => {
    updateAnchor()
  })
})
</script></body>
</html>
